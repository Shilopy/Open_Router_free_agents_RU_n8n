{
  "name": "OpenRouter_Advanced_THREE_PHASE",
  "nodes": [
    {
      "parameters": {},
      "id": "start-node",
      "name": "‚ñ∂Ô∏è Start Workflow",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -384,
        -208
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "api-key",
              "name": "openrouter_api_key",
              "value": "YOUR_OPENROUTER_API_KEY_HERE",
              "type": "string"
            },
            {
              "id": "test-mode",
              "name": "test_mode",
              "value": "auto",
              "type": "string"
            },
            {
              "id": "rate-limit",
              "name": "rate_limit_ms",
              "value": "2000",
              "type": "number"
            },
            {
              "id": "phase0-max",
              "name": "phase0_max_models",
              "value": "30",
              "type": "number"
            },
            {
              "id": "phase1-max",
              "name": "phase1_max_models",
              "value": "15",
              "type": "number"
            },
            {
              "id": "phase2-max",
              "name": "phase2_max_models",
              "value": "10",
              "type": "number"
            },
            {
              "id": "scoring-weights",
              "name": "scoring_weights",
              "value": "{\"power\":0.3,\"cost_efficiency\":0.2,\"capability\":0.25,\"compatibility\":0.15,\"performance\":0.1}",
              "type": "string"
            },
            {
              "id": "min-context",
              "name": "min_context_length",
              "value": "32000",
              "type": "number"
            },
            {
              "id": "max-price-prompt",
              "name": "max_price_prompt",
              "value": "0.000002",
              "type": "number"
            },
            {
              "id": "max-price-completion",
              "name": "max_price_completion",
              "value": "0.000004",
              "type": "number"
            },
            {
              "id": "prefer-skills",
              "name": "preferred_skills",
              "value": "code,reasoning,chat",
              "type": "string"
            },
            {
              "id": "task-mode",
              "name": "task_mode",
              "value": "universal",
              "type": "string",
              "description": "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º: universal | coding | reasoning | chatbot | economy | power | speed"
            },
            {
              "id": "manual-models",
              "name": "manual_models",
              "value": "",
              "type": "string",
              "description": "–°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é. –ï—Å–ª–∏ –∑–∞–¥–∞–Ω ‚Äî —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–Ω–∏. –ü—Ä–∏–º–µ—Ä: deepseek/deepseek-r1-distill-llama-70b,qwen/qwen-2.5-72b-instruct:free"
            }
          ]
        },
        "options": {}
      },
      "id": "config-node",
      "name": "‚öôÔ∏è Configuration",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -320,
        256
      ]
    },
    {
      "parameters": {
        "jsCode": "// üé≠ TASK PRESET SELECTOR\n// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∂–∏–º –≤ ‚öôÔ∏è Configuration ‚Üí task_mode\n// –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã: universal | coding | reasoning | chatbot | economy | power | speed\n\nconst config = $input.first().json;\nconst taskMode = (config.task_mode || 'universal').toLowerCase().trim();\n\n// ‚îÄ‚îÄ‚îÄ –ü–†–ï–°–ï–¢–´ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nconst PRESETS = {\n\n  // üåê UNIVERSAL: –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)\n  universal: {\n    label: 'üåê Universal ‚Äî –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä',\n    preferred_skills: 'code,reasoning,chat',\n    min_context_length: 32000,\n    phase0_max_models: 30,\n    phase2_max_models: 10,\n    max_price_prompt: 0.000002,\n    max_price_completion: 0.000004,\n    scoring_weights: { power: 0.30, cost_efficiency: 0.20, capability: 0.25, compatibility: 0.15, performance: 0.10 }\n  },\n\n  // üíª CODING: –õ—É—á—à–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∫–æ–¥–∞\n  coding: {\n    label: 'üíª Coding ‚Äî –õ—É—á—à–∏–µ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è',\n    preferred_skills: 'code',\n    min_context_length: 64000,\n    phase0_max_models: 25,\n    phase2_max_models: 8,\n    max_price_prompt: 0.000002,\n    max_price_completion: 0.000004,\n    scoring_weights: { power: 0.20, cost_efficiency: 0.10, capability: 0.50, compatibility: 0.15, performance: 0.05 }\n  },\n\n  // üß† REASONING: –õ–æ–≥–∏–∫–∞, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, —Å–ª–æ–∂–Ω—ã–π –∞–Ω–∞–ª–∏–∑\n  reasoning: {\n    label: 'üß† Reasoning ‚Äî –õ–æ–≥–∏–∫–∞ –∏ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏',\n    preferred_skills: 'reasoning,think',\n    min_context_length: 64000,\n    phase0_max_models: 20,\n    phase2_max_models: 8,\n    max_price_prompt: 0.000002,\n    max_price_completion: 0.000004,\n    scoring_weights: { power: 0.45, cost_efficiency: 0.05, capability: 0.35, compatibility: 0.10, performance: 0.05 }\n  },\n\n  // üí¨ CHATBOT: –ë—ã—Å—Ç—Ä—ã–π –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥\n  chatbot: {\n    label: 'üí¨ Chatbot ‚Äî –ë—ã—Å—Ç—Ä—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π –ò–ò',\n    preferred_skills: 'chat,instruct',\n    min_context_length: 16000,\n    phase0_max_models: 35,\n    phase2_max_models: 10,\n    max_price_prompt: 0.000002,\n    max_price_completion: 0.000004,\n    scoring_weights: { power: 0.10, cost_efficiency: 0.20, capability: 0.30, compatibility: 0.15, performance: 0.25 }\n  },\n\n  // üí∞ ECONOMY: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã, —Ç–æ–ª—å–∫–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ\n  economy: {\n    label: 'üí∞ Economy ‚Äî –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤',\n    preferred_skills: 'chat,code',\n    min_context_length: 16000,\n    phase0_max_models: 20,\n    phase2_max_models: 5,\n    max_price_prompt: 0.0000005,\n    max_price_completion: 0.000001,\n    scoring_weights: { power: 0.15, cost_efficiency: 0.55, capability: 0.15, compatibility: 0.10, performance: 0.05 }\n  },\n\n  // ‚ö° POWER: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å –∏ –±–æ–ª—å—à–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\n  power: {\n    label: '‚ö° Power ‚Äî –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π',\n    preferred_skills: 'reasoning,code',\n    min_context_length: 128000,\n    phase0_max_models: 20,\n    phase2_max_models: 8,\n    max_price_prompt: 0.000002,\n    max_price_completion: 0.000004,\n    scoring_weights: { power: 0.50, cost_efficiency: 0.10, capability: 0.25, compatibility: 0.10, performance: 0.05 }\n  },\n\n  // üöÄ SPEED: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã\n  speed: {\n    label: 'üöÄ Speed ‚Äî –°–∞–º—ã–µ –±—ã—Å—Ç—Ä—ã–µ –º–æ–¥–µ–ª–∏',\n    preferred_skills: 'chat,instruct',\n    min_context_length: 16000,\n    phase0_max_models: 30,\n    phase2_max_models: 8,\n    max_price_prompt: 0.000002,\n    max_price_completion: 0.000004,\n    scoring_weights: { power: 0.10, cost_efficiency: 0.15, capability: 0.20, compatibility: 0.15, performance: 0.40 }\n  }\n};\n\n// ‚îÄ‚îÄ‚îÄ –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ü–†–ï–°–ï–¢–ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nconst preset = PRESETS[taskMode] || PRESETS['universal'];\nconst isUnknown = !PRESETS[taskMode];\n\nconsole.log('\\n' + '='.repeat(100));\nconsole.log('üé≠ TASK PRESET SELECTOR');\nconsole.log('='.repeat(100));\n\nif (isUnknown) {\n  console.log(`‚ö†Ô∏è  Unknown task_mode: '${taskMode}'. Falling back to 'universal'.`);\n  console.log(`   Available: ${Object.keys(PRESETS).join(' | ')}`);\n} else {\n  console.log(`‚úÖ Task Mode: ${preset.label}`);\n}\n\nconsole.log('\\nüìã Applied Settings:');\nconsole.log(`   Preferred Skills : ${preset.preferred_skills}`);\nconsole.log(`   Min Context      : ${preset.min_context_length.toLocaleString()} tokens`);\nconsole.log(`   Phase 0 Max      : ${preset.phase0_max_models} models`);\nconsole.log(`   Phase 2 Max      : ${preset.phase2_max_models} models`);\nconsole.log(`   Max Price Prompt : $${(preset.max_price_prompt * 1_000_000).toFixed(2)}/1M tokens`);\nconsole.log('   Scoring Weights  :');\nfor (const [k, v] of Object.entries(preset.scoring_weights)) {\n  const bar = '‚ñà'.repeat(Math.round(v * 20));\n  console.log(`     ${k.padEnd(20)} ${(v * 100).toFixed(0).padStart(3)}%  ${bar}`);\n}\nconsole.log('='.repeat(100) + '\\n');\n\n// –ú—ë—Ä–¥–∂–∏–º –∫–æ–Ω—Ñ–∏–≥ —Å –ø—Ä–µ—Å–µ—Ç–æ–º (–ø—Ä–µ—Å–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç—ã)\nreturn [{\n  json: {\n    ...config,\n    ...preset,\n    scoring_weights: JSON.stringify(preset.scoring_weights),\n    task_mode_applied: taskMode,\n    task_mode_label: preset.label\n  }\n}];"
      },
      "id": "task-preset-node",
      "name": "üé≠ Apply Task Preset",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -144,
        256
      ],
      "notes": "task_mode variants: universal | coding | reasoning | chatbot | economy | power | speed"
    },
    {
      "parameters": {
        "url": "https://openrouter.ai/api/v1/models",
        "options": {}
      },
      "id": "fetch-catalog",
      "name": "üì° Fetch Full OpenRouter Catalog",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        240,
        128
      ]
    },
    {
      "parameters": {
        "jsCode": "// üß† PHASE 0: INTELLIGENT PRE-SCORING & FILTERING\n// –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –í–°–ï –º–æ–¥–µ–ª–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –≤—ã–±–∏—Ä–∞–µ–º –ª—É—á—à–∏–µ –ø–æ —Å–æ—Å—Ç–∞–≤–Ω–æ–º—É —Å–∫–æ—Ä—É\n\nconst catalogData = $input.first().json;\nconst allModels = catalogData.data || [];\nconst config = $('üé≠ Apply Task Preset').first().json;\n\nconsole.log('\\n' + '='.repeat(100));\nconsole.log('üß† PHASE 0: INTELLIGENT MODEL PRE-SCORING & SELECTION');\nconsole.log('='.repeat(100));\nconsole.log(`üìä Total models in OpenRouter catalog: ${allModels.length}`);\n\n// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏\nconst minContextLength = parseInt(config.min_context_length) || 32000;\nconst maxPricePrompt = parseFloat(config.max_price_prompt) || 0.000002; // $2 per 1M tokens\nconst maxPriceCompletion = parseFloat(config.max_price_completion) || 0.000004; // $4 per 1M tokens\nconst preferredSkills = (config.preferred_skills || 'code,reasoning,chat').split(',').map(s => s.trim());\n\n// –í–µ—Å–∞ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ —Å–∫–æ—Ä–∏–Ω–≥–∞ (—Å—É–º–º–∞ = 1.0)\nconst weights = JSON.parse(config.scoring_weights || '{\"power\":0.3,\"cost_efficiency\":0.2,\"capability\":0.25,\"compatibility\":0.15,\"performance\":0.1}');\n\nconsole.log('\\n‚öôÔ∏è Filtering & Scoring Configuration:');\nconsole.log(`   Min context length: ${minContextLength} tokens`);\nconsole.log(`   Max price (prompt): $${(maxPricePrompt * 1000000).toFixed(2)}/1M tokens`);\nconsole.log(`   Max price (completion): $${(maxPriceCompletion * 1000000).toFixed(2)}/1M tokens`);\nconsole.log(`   Preferred skills: ${preferredSkills.join(', ')}`);\nconsole.log(`   Scoring weights:`, weights);\n\n// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\nlet stats = {\n  total: allModels.length,\n  free: 0,\n  russia_compatible: 0,\n  meets_context: 0,\n  has_metadata: 0,\n  final_selected: 0\n};\n\n// 1Ô∏è‚É£ –§–ò–õ–¨–¢–†–ê–¶–ò–Ø: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ + —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å –†–§ + –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\nconst filteredModels = allModels.filter(model => {\n  const id = (model.id || '').toLowerCase();\n  const pricing = model.pricing || {};\n  \n  // –ö—Ä–∏—Ç–µ—Ä–∏–π 1: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ—Å—Ç—å\n  const isFreeByTag = id.includes(':free') || id.includes('/free');\n  const promptPrice = parseFloat(pricing.prompt) || 0;\n  const completionPrice = parseFloat(pricing.completion) || 0;\n  const isFreeByPrice = (promptPrice <= maxPricePrompt && completionPrice <= maxPriceCompletion);\n  const isFree = isFreeByTag || isFreeByPrice;\n  \n  if (!isFree) return false;\n  stats.free++;\n  \n  // –ö—Ä–∏—Ç–µ—Ä–∏–π 2: –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –†–§ (–∏—Å–∫–ª—é—á–∞–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏)\n  const blockedForRussia = [\n    'claude-3', 'gpt-4o', 'gpt-4-turbo', 'gemini-1.5', \n    'o1-mini', 'o1-preview', 'gpt-3.5-turbo-0125'\n  ];\n  const isBlocked = blockedForRussia.some(blocked => id.includes(blocked));\n  \n  if (isBlocked) return false;\n  stats.russia_compatible++;\n  \n  // –ö—Ä–∏—Ç–µ—Ä–∏–π 3: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\n  const contextLength = model.context_length || 0;\n  if (contextLength < minContextLength) return false;\n  stats.meets_context++;\n  \n  return true;\n});\n\nconsole.log(`\\nüìä Filtering Results:`);\nconsole.log(`   Total models: ${stats.total}`);\nconsole.log(`   Free models: ${stats.free}`);\nconsole.log(`   Russia-compatible: ${stats.russia_compatible}`);\nconsole.log(`   Meets context requirement (‚â•${minContextLength}): ${stats.meets_context}`);\nconsole.log(`   ‚úÖ Passed initial filtering: ${filteredModels.length}`);\n\n// 2Ô∏è‚É£ SCORING: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏\nconst scoredModels = filteredModels.map(model => {\n  const id = model.id || '';\n  const pricing = model.pricing || {};\n  const contextLength = model.context_length || 0;\n  const architecture = model.architecture || {};\n  const modality = (architecture.modality || 'text->text').toLowerCase();\n  \n  // üìä POWER SCORE (0-10): –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ + –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞\n  let powerScore = 0;\n  \n  // –ö–æ–Ω—Ç–µ–∫—Å—Ç (0-5 –±–∞–ª–ª–æ–≤)\n  if (contextLength >= 200000) powerScore += 5;\n  else if (contextLength >= 128000) powerScore += 4;\n  else if (contextLength >= 64000) powerScore += 3;\n  else if (contextLength >= 32000) powerScore += 2;\n  else powerScore += 1;\n  \n  // –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å (0-3 –±–∞–ª–ª–∞)\n  if (modality.includes('image') || modality.includes('vision')) powerScore += 2;\n  if (modality.includes('audio') || modality.includes('video')) powerScore += 1;\n  \n  // –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –º–æ—â–Ω–æ—Å—Ç–∏ (0-2 –±–∞–ª–ª–∞)\n  const powerIndicators = ['405b', '200b', '120b', '110b', '70b'];\n  if (powerIndicators.some(ind => id.includes(ind))) powerScore += 2;\n  else if (id.includes('large') || id.includes('ultra')) powerScore += 1;\n  \n  powerScore = Math.min(10, powerScore); // –ú–∞–∫—Å–∏–º—É–º 10\n  \n  // üí∞ COST EFFICIENCY SCORE (0-10): –ß–µ–º –¥–µ—à–µ–≤–ª–µ, —Ç–µ–º –ª—É—á—à–µ\n  const promptPrice = parseFloat(pricing.prompt) || 0;\n  const completionPrice = parseFloat(pricing.completion) || 0;\n  const avgPrice = (promptPrice + completionPrice) / 2;\n  \n  let costScore = 0;\n  if (avgPrice === 0) costScore = 10; // –ê–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è\n  else if (avgPrice <= 0.0000005) costScore = 9; // $0.5/1M\n  else if (avgPrice <= 0.000001) costScore = 8; // $1/1M\n  else if (avgPrice <= 0.0000015) costScore = 7; // $1.5/1M\n  else if (avgPrice <= 0.000002) costScore = 5; // $2/1M\n  else costScore = 3;\n  \n  // üß† CAPABILITY SCORE (0-10): –ù–∞–≤—ã–∫–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏\n  let capabilityScore = 5; // –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å\n  \n  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–≤—ã–∫–∏ –º–æ–¥–µ–ª–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ\n  const modelSkills = [];\n  if (id.includes('coder') || id.includes('code')) {\n    modelSkills.push('code');\n    capabilityScore += 2;\n  }\n  if (id.includes('reasoning') || id.includes('think')) {\n    modelSkills.push('reasoning');\n    capabilityScore += 2;\n  }\n  if (id.includes('chat') || id.includes('instruct')) {\n    modelSkills.push('chat');\n    capabilityScore += 1;\n  }\n  if (modality.includes('image') || modality.includes('vision')) {\n    modelSkills.push('vision');\n    capabilityScore += 1;\n  }\n  \n  // –ë–æ–Ω—É—Å –∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–º –Ω–∞–≤—ã–∫–∞–º\n  const matchesPreferred = preferredSkills.some(skill => modelSkills.includes(skill));\n  if (matchesPreferred) capabilityScore += 1;\n  \n  capabilityScore = Math.min(10, capabilityScore);\n  \n  // üåç COMPATIBILITY SCORE (0-10): –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è –†–§\n  let compatibilityScore = 5; // –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å (–ø—Ä–æ—à–ª–∏ —Ñ–∏–ª—å—Ç—Ä)\n  \n  // –ë–æ–Ω—É—Å –¥–ª—è –º–æ–¥–µ–ª–µ–π –æ—Ç –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤\n  const friendlyProviders = ['deepseek', 'qwen', 'meta-llama', 'mistral', 'google/gemma', 'nvidia'];\n  if (friendlyProviders.some(provider => id.includes(provider))) compatibilityScore += 3;\n  \n  // –ë–æ–Ω—É—Å –¥–ª—è open-source –º–æ–¥–µ–ª–µ–π (—á–∞—â–µ –¥–æ—Å—Ç—É–ø–Ω—ã)\n  if (id.includes('open') || id.includes(':free')) compatibilityScore += 2;\n  \n  compatibilityScore = Math.min(10, compatibilityScore);\n  \n  // ‚ö° PERFORMANCE SCORE (0-10): –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n  let performanceScore = 5; // –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n  \n  // –ú–æ–¥–µ–ª–∏ —Å \"fast\", \"instant\", \"turbo\" –æ–±—ã—á–Ω–æ –±—ã—Å—Ç—Ä–µ–µ\n  if (id.includes('fast') || id.includes('instant') || id.includes('turbo')) performanceScore += 3;\n  \n  // –ë–æ–ª–µ–µ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ (v3, 2025, etc.) –æ–±—ã—á–Ω–æ –ª—É—á—à–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã\n  if (id.match(/v3|2025|2024/)) performanceScore += 2;\n  \n  performanceScore = Math.min(10, performanceScore);\n  \n  // üéØ COMPOSITE SCORE: –í–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞ –≤—Å–µ—Ö —Å–∫–æ—Ä–æ–≤\n  const compositeScore = \n    powerScore * weights.power +\n    costScore * weights.cost_efficiency +\n    capabilityScore * weights.capability +\n    compatibilityScore * weights.compatibility +\n    performanceScore * weights.performance;\n  \n  return {\n    model_id: id,\n    context_length: contextLength,\n    description: (model.description || '').substring(0, 150),\n    pricing: pricing,\n    architecture: architecture,\n    modality: modality,\n    \n    // –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å–∫–æ—Ä—ã\n    scores: {\n      power: parseFloat(powerScore.toFixed(2)),\n      cost_efficiency: parseFloat(costScore.toFixed(2)),\n      capability: parseFloat(capabilityScore.toFixed(2)),\n      compatibility: parseFloat(compatibilityScore.toFixed(2)),\n      performance: parseFloat(performanceScore.toFixed(2)),\n      composite: parseFloat(compositeScore.toFixed(2))\n    },\n    \n    // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞\n    skills: modelSkills,\n    avg_price: avgPrice,\n    is_multimodal: modality.includes('image') || modality.includes('vision'),\n    source: 'openrouter_catalog_scored'\n  };\n});\n\n// 3Ô∏è‚É£ –°–û–†–¢–ò–†–û–í–ö–ê: –ü–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–º—É —Å–∫–æ—Ä—É (–ª—É—á—à–∏–µ —Å–≤–µ—Ä—Ö—É)\nconst rankedModels = scoredModels.sort((a, b) => b.scores.composite - a.scores.composite);\n\n// 4Ô∏è‚É£ SELECTION: –¢–æ–ø-N –º–æ–¥–µ–ª–µ–π –¥–ª—è Phase 1\nconst maxModels = parseInt(config.phase0_max_models) || 30;\nconst selectedModels = rankedModels.slice(0, maxModels);\nstats.final_selected = selectedModels.length;\n\nconsole.log(`\\nüèÜ TOP ${selectedModels.length} MODELS (Pre-Scored for Phase 1):\\n`);\nselectedModels.forEach((m, i) => {\n  const skills = m.skills.length > 0 ? ` [${m.skills.join(', ')}]` : '';\n  const multimodal = m.is_multimodal ? ' üé®' : '';\n  \n  console.log(`${(i+1).toString().padStart(2)}. ${m.model_id}${multimodal}`);\n  console.log(`    Composite: ${m.scores.composite.toFixed(2)}/10 | Context: ${m.context_length.toLocaleString()} | Price: $${(m.avg_price * 1000000).toFixed(2)}/1M`);\n  console.log(`    Scores: Power=${m.scores.power} | Cost=${m.scores.cost_efficiency} | Capability=${m.scores.capability} | Compat=${m.scores.compatibility} | Perf=${m.scores.performance}${skills}`);\n  console.log('---');\n});\n\nconsole.log('\\n' + '='.repeat(100));\nconsole.log(`‚úÖ PHASE 0 COMPLETE: Selected ${stats.final_selected} best models for Phase 1 testing`);\nconsole.log('='.repeat(100) + '\\n');\n\nreturn selectedModels.map(m => ({ json: m }));"
      },
      "id": "phase0-scoring",
      "name": "üß† PHASE 0: Pre-Scoring & Selection",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        16,
        432
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "phase1-split",
      "name": "üì¶ PHASE 1: Split (Quick Test)",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        240,
        64
      ]
    },
    {
      "parameters": {
        "jsCode": "const delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst config = $('üé≠ Apply Task Preset').first().json;\nconst rateLimit = config.rate_limit_ms || 2000;\nconst apiKey = config.openrouter_api_key;\n\nawait delay(rateLimit);\n\nconst modelData = $input.first().json;\nconsole.log(`\\n‚è≥ [PHASE 1] Quick test: ${modelData.model_id}`);\nconsole.log(`   Pre-score: ${modelData.scores.composite.toFixed(2)}/10`);\n\nreturn [{\n  json: {\n    ...modelData,\n    openrouter_api_key: apiKey,\n    started_at: Date.now(),\n    test_results: {}\n  }\n}];"
      },
      "id": "init-phase1",
      "name": "üöÄ Init Phase 1",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        352,
        272
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "={{ 'Bearer ' + $json.openrouter_api_key }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"model\":\"{{$json.model_id}}\",\"messages\":[{\"role\":\"user\",\"content\":\"Respond with exactly: 'OK'\"}],\"max_tokens\":5,\"temperature\":0.1}",
        "options": {
          "timeout": 20000
        }
      },
      "id": "test1-availability",
      "name": "üß™ Test 1: Availability",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        480,
        528
      ],
      "continueOnFail": true
    },
    {
      "parameters": {
        "jsCode": "const modelContext = $('üöÄ Init Phase 1').first().json;\nconst testResponse = $input.first().json;\n\nconst success = !!testResponse.choices;\nconst latency = Date.now() - modelContext.started_at;\nconst cost = testResponse.usage?.cost || 0;\nconst response = testResponse.choices?.[0]?.message?.content || '';\n\nconsole.log(`${success ? '‚úÖ' : '‚ùå'} Availability: ${latency}ms | Pre-score: ${modelContext.scores.composite.toFixed(2)}`);\n\nreturn [{\n  json: {\n    ...modelContext,\n    test_results: {\n      availability: { success, latency, cost, response: response.substring(0, 200) }\n    }\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        608,
        256
      ],
      "id": "save-test1",
      "name": "üíæ Save Test 1"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        736,
        64
      ],
      "id": "collect-phase1",
      "name": "üì• Collect Phase 1"
    },
    {
      "parameters": {
        "jsCode": "// üéØ PHASE 1 ANALYSIS: –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º Pre-Score + Test Results\nconst items = $input.all();\nconst config = $('üé≠ Apply Task Preset').first().json;\n\nconsole.log('\\n' + '='.repeat(100));\nconsole.log('üéØ PHASE 1 ANALYSIS: Combining Pre-Scores with Availability Results');\nconsole.log('='.repeat(100));\n\nconst analyzed = items.map(item => {\n  const availability = item.json.test_results?.availability || {};\n  const preScore = item.json.scores?.composite || 0;\n  \n  // –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞, –¥–æ–±–∞–≤–ª—è–µ–º –±–æ–Ω—É—Å –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å\n  let finalScore = preScore;\n  if (availability.success) {\n    const latency = availability.latency || 999999;\n    // –ë–æ–Ω—É—Å –∑–∞ –±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç (–º–∞–∫—Å +2 –±–∞–ª–ª–∞)\n    const speedBonus = Math.max(0, 2 - (latency / 5000));\n    finalScore += speedBonus;\n  } else {\n    // –®—Ç—Ä–∞—Ñ –∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å\n    finalScore = finalScore * 0.3; // –°–æ—Ö—Ä–∞–Ω—è–µ–º 30% —Å–∫–æ—Ä–∞ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏\n  }\n  \n  return {\n    ...item.json,\n    final_phase1_score: parseFloat(finalScore.toFixed(2)),\n    availability_status: availability.success ? 'available' : 'unavailable'\n  };\n});\n\nconst available = analyzed.filter(m => m.availability_status === 'available');\nconst unavailable = analyzed.filter(m => m.availability_status === 'unavailable');\n\nconsole.log(`\\nüìä Phase 1 Results:`);\nconsole.log(`   Total tested: ${items.length}`);\nconsole.log(`   ‚úÖ Available: ${available.length}`);\nconsole.log(`   ‚ùå Unavailable: ${unavailable.length}`);\n\n// –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —Å–∫–æ—Ä—É\nconst sorted = available.sort((a, b) => b.final_phase1_score - a.final_phase1_score);\n\n// –û—Ç–±–∏—Ä–∞–µ–º —Ç–æ–ø-N –¥–ª—è Phase 2\nconst maxForPhase2 = parseInt(config.phase2_max_models) || 10;\nconst selectedForPhase2 = sorted.slice(0, maxForPhase2);\n\nconsole.log(`\\nüèÜ TOP ${selectedForPhase2.length} Models Selected for PHASE 2 (Detailed Testing):\\n`);\nselectedForPhase2.forEach((m, i) => {\n  const latency = m.test_results?.availability?.latency || 0;\n  const skills = m.skills?.join(', ') || 'general';\n  \n  console.log(`${(i+1).toString().padStart(2)}. ${m.model_id}`);\n  console.log(`    Final Score: ${m.final_phase1_score.toFixed(2)}/10 | Pre-Score: ${m.scores.composite.toFixed(2)} | Latency: ${latency}ms`);\n  console.log(`    Skills: ${skills} | Context: ${m.context_length.toLocaleString()}`);\n  console.log('---');\n});\n\nconsole.log('\\n' + '='.repeat(100));\nconsole.log('üöÄ Proceeding to PHASE 2: Detailed Capability Testing');\nconsole.log('='.repeat(100) + '\\n');\n\nreturn selectedForPhase2.map(m => ({ json: m }));"
      },
      "id": "analyze-phase1",
      "name": "üéØ Analyze Phase 1 & Select for Phase 2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        896,
        256
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "phase2-split",
      "name": "üì¶ PHASE 2: Split (Detailed Tests)",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1056,
        64
      ]
    },
    {
      "parameters": {
        "jsCode": "const delay = ms => new Promise(resolve => setTimeout(resolve, ms));\nconst config = $('üé≠ Apply Task Preset').first().json;\nawait delay(config.rate_limit_ms || 2000);\n\nconst modelData = $input.first().json;\nconsole.log(`\\n‚è≥ [PHASE 2] Detailed tests: ${modelData.model_id}`);\n\nreturn [{ json: { ...modelData, started_at: Date.now() } }];"
      },
      "id": "init-phase2",
      "name": "üöÄ Init Phase 2",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1168,
        272
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "={{ 'Bearer ' + $json.openrouter_api_key }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"model\":\"{{$json.model_id}}\",\"messages\":[{\"role\":\"user\",\"content\":\"Analyze this Python code for security issues: `import os; password = \\\"admin123\\\"; os.system(f'echo {password}')`\"}],\"max_tokens\":300}",
        "options": {
          "timeout": 45000
        }
      },
      "id": "test2",
      "name": "üõ°Ô∏è Test 2: Security",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        1296,
        128
      ],
      "continueOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "={{ 'Bearer ' + $json.openrouter_api_key }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"model\":\"{{$json.model_id}}\",\"messages\":[{\"role\":\"user\",\"content\":\"Refactor with type hints and error handling: `def add(a, b): return a + b`\"}],\"max_tokens\":400}",
        "options": {
          "timeout": 45000
        }
      },
      "id": "test3",
      "name": "‚ú® Test 3: Code Quality",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        1584,
        128
      ],
      "continueOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "={{ 'Bearer ' + $json.openrouter_api_key }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"model\":\"{{$json.model_id}}\",\"messages\":[{\"role\":\"user\",\"content\":\"A bat and ball cost $1.10 total. The bat costs $1.00 more than the ball. How much is the ball? Explain step-by-step.\"}],\"max_tokens\":500}",
        "options": {
          "timeout": 45000
        }
      },
      "id": "test4",
      "name": "üß† Test 4: Reasoning",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        1808,
        128
      ],
      "continueOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://openrouter.ai/api/v1/chat/completions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "={{ 'Bearer ' + $json.openrouter_api_key }}"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\"model\":\"{{$json.model_id}}\",\"messages\":[{\"role\":\"user\",\"content\":\"Write a docstring for: `def process_data(data, *, threshold=0.5, normalize=True):`\"}],\"max_tokens\":400}",
        "options": {
          "timeout": 45000
        }
      },
      "id": "test5",
      "name": "üìö Test 5: Documentation",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.4,
      "position": [
        2032,
        128
      ],
      "continueOnFail": true
    },
    {
      "parameters": {
        "jsCode": "const ctx = $('üöÄ Init Phase 2').first().json;\nconst resp = $input.first().json;\nconst success = !!resp.choices;\nconst latency = Date.now() - ctx.started_at;\nconst tokens = resp.usage?.total_tokens || 0;\nconsole.log(`${success ? '‚úÖ' : '‚ùå'} Security | ${latency}ms | ${tokens} tokens`);\nreturn [{ json: { ...ctx, test_results: { ...ctx.test_results, security: { success, latency, cost: resp.usage?.cost || 0, response: (resp.choices?.[0]?.message?.content || '').substring(0, 200), tokens } } } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1424,
        128
      ],
      "id": "save-test2",
      "name": "üíæ Save T2"
    },
    {
      "parameters": {
        "jsCode": "const ctx = $('üíæ Save T2').first().json;\nconst resp = $input.first().json;\nconst success = !!resp.choices;\nconst latency = Date.now() - ctx.started_at;\nconst tokens = resp.usage?.total_tokens || 0;\nconsole.log(`${success ? '‚úÖ' : '‚ùå'} Code Quality | ${latency}ms | ${tokens} tokens`);\nreturn [{ json: { ...ctx, test_results: { ...ctx.test_results, code_quality: { success, latency, cost: resp.usage?.cost || 0, response: (resp.choices?.[0]?.message?.content || '').substring(0, 200), tokens } } } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1680,
        128
      ],
      "id": "save-test3",
      "name": "üíæ Save T3"
    },
    {
      "parameters": {
        "jsCode": "const ctx = $('üíæ Save T3').first().json;\nconst resp = $input.first().json;\nconst success = !!resp.choices;\nconst latency = Date.now() - ctx.started_at;\nconst tokens = resp.usage?.total_tokens || 0;\nconsole.log(`${success ? '‚úÖ' : '‚ùå'} Reasoning | ${latency}ms | ${tokens} tokens`);\nreturn [{ json: { ...ctx, test_results: { ...ctx.test_results, reasoning: { success, latency, cost: resp.usage?.cost || 0, response: (resp.choices?.[0]?.message?.content || '').substring(0, 200), tokens } } } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1904,
        128
      ],
      "id": "save-test4",
      "name": "üíæ Save T4"
    },
    {
      "parameters": {
        "jsCode": "const ctx = $('üíæ Save T4').first().json;\nconst resp = $input.first().json;\nconst success = !!resp.choices;\nconst latency = Date.now() - ctx.started_at;\nconst tokens = resp.usage?.total_tokens || 0;\nconsole.log(`${success ? '‚úÖ' : '‚ùå'} Documentation | ${latency}ms | ${tokens} tokens`);\nreturn [{ json: { ...ctx, test_results: { ...ctx.test_results, documentation: { success, latency, cost: resp.usage?.cost || 0, response: (resp.choices?.[0]?.message?.content || '').substring(0, 200), tokens } } } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2128,
        128
      ],
      "id": "save-test5",
      "name": "üíæ Save T5"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2272,
        256
      ],
      "id": "collect-phase2",
      "name": "üì• Collect Phase 2"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst results = items.map(item => {\n  const tests = item.json.test_results || {};\n  let qualityScore = 0;\n  let successCount = 0;\n  let totalTokens = 0;\n  \n  for (const test in tests) {\n    const result = tests[test];\n    if (result.success) {\n      successCount++;\n      totalTokens += result.tokens || 0;\n      const response = (result.response || '').toLowerCase();\n      \n      // –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–∞\n      let score = 5;\n      switch(test) {\n        case 'availability': score = response.trim() === 'ok' ? 10 : 5; break;\n        case 'security': score = response.includes('vulnerability') || response.includes('security') ? 9 : 6; break;\n        case 'code_quality': score = response.includes('def ') && response.includes('return') ? 9 : 5; break;\n        case 'reasoning': score = response.includes('step') ? 9 : 5; break;\n        case 'documentation': score = response.includes('args:') ? 10 : 6; break;\n      }\n      qualityScore += score;\n    }\n  }\n  \n  const avgQuality = successCount > 0 ? qualityScore / successCount : 0;\n  const tokenEfficiency = totalTokens > 0 ? 10 - Math.min(10, totalTokens / 100) : 5; // –ú–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ = –ª—É—á—à–µ\n  \n  // –§–ò–ù–ê–õ–¨–ù–´–ô COMPOSITE SCORE = Pre-Score + Quality + Token Efficiency\n  const finalScore = \n    (item.json.scores?.composite || 0) * 0.4 +  // 40% –æ—Ç pre-score\n    avgQuality * 0.4 +                           // 40% –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤\n    tokenEfficiency * 0.2;                       // 20% –æ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤\n  \n  return {\n    model_id: item.json.model_id,\n    final_score: parseFloat(finalScore.toFixed(2)),\n    pre_score: item.json.scores?.composite || 0,\n    quality_score: parseFloat(avgQuality.toFixed(2)),\n    token_efficiency: parseFloat(tokenEfficiency.toFixed(2)),\n    success_rate: `${successCount}/5`,\n    total_tokens: totalTokens,\n    context_length: item.json.context_length,\n    skills: item.json.skills || [],\n    test_results: tests\n  };\n}).sort((a, b) => b.final_score - a.final_score);\n\nconsole.log('\\n' + '='.repeat(100));\nconsole.log('üèÜ FINAL RANKING (Best Models)');\nconsole.log('='.repeat(100) + '\\n');\n\nresults.forEach((r, i) => {\n  console.log(`${(i+1).toString().padStart(2)}. ${r.model_id}`);\n  console.log(`    Final: ${r.final_score.toFixed(2)} = PreScore(${r.pre_score.toFixed(1)}) + Quality(${r.quality_score.toFixed(1)}) + TokenEff(${r.token_efficiency.toFixed(1)})`);\n  console.log(`    Success: ${r.success_rate} | Tokens: ${r.total_tokens} | Skills: [${r.skills.join(', ')}]`);\n  console.log('---');\n});\n\nreturn results.map(r => ({ json: r }));"
      },
      "id": "final-ranking",
      "name": "üìä Final Ranking & Analysis",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2448,
        304
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        2880,
        480
      ],
      "id": "export-file",
      "name": "üìÑ Export Results"
    },
    {
      "id": "html-report-node",
      "name": "üìà HTML Report Generator",
      "type": "n8n-nodes-base.code",
      "position": [
        2640,
        480
      ],
      "parameters": {
        "jsCode": "const items = $input.all();\nconst models = items.map(i => i.json);\nconst config = $('üé≠ Apply Task Preset').first().json;\nconst mode = config.task_mode_label || config.task_mode_applied || 'universal';\nconst ts = new Date().toLocaleString('ru-RU');\n\nconst sc = v => {\n  if (v >= 8) return '#22c55e';\n  if (v >= 6) return '#f59e0b';\n  if (v >= 4) return '#f97316';\n  return '#ef4444';\n};\nconst bar = (v, max=10) => {\n  const pct = Math.min(100, (v/max)*100).toFixed(1);\n  const col = sc(v);\n  return `<div style=\"background:#1e293b;border-radius:4px;height:10px;width:100%;\"><div style=\"background:${col};width:${pct}%;height:10px;border-radius:4px;transition:width .3s\"></div></div><span style=\"font-size:11px;color:${col};font-weight:700\">${v.toFixed(1)}</span>`;\n};\nconst badge = txt => `<span style=\"background:#334155;color:#94a3b8;padding:2px 7px;border-radius:20px;font-size:11px;\">${txt}</span>`;\nconst tick = ok => ok ? '‚úÖ' : '‚ùå';\n\nconst rows = models.map((m, i) => {\n  const tr = m.test_results || {};\n  const avail = tr.availability || {};\n  const sec   = tr.security || {};\n  const code  = tr.code_quality || {};\n  const reas  = tr.reasoning || {};\n  const docs  = tr.documentation || {};\n  const skills = (m.skills || []).map(badge).join(' ');\n  const ctx = (m.context_length||0) >= 100000\n    ? `<span style=\"color:#818cf8\">${((m.context_length||0)/1000).toFixed(0)}k</span>`\n    : `${((m.context_length||0)/1000).toFixed(0)}k`;\n  const medal = i===0?'ü•á':i===1?'ü•à':i===2?'ü•â':`<b style=\"color:#64748b\">${i+1}</b>`;\n\n  return `<tr style=\"border-bottom:1px solid #1e293b;\">\n    <td style=\"padding:12px 8px;text-align:center;\">${medal}</td>\n    <td style=\"padding:12px 8px;\">\n      <div style=\"font-weight:700;color:#e2e8f0;font-size:13px;\">${m.model_id}</div>\n      <div style=\"margin-top:4px;\">${skills}</div>\n    </td>\n    <td style=\"padding:12px 8px;text-align:center;\">${ctx}</td>\n    <td style=\"padding:12px 8px;min-width:120px;\">${bar(m.final_score||0)}</td>\n    <td style=\"padding:12px 8px;min-width:100px;\">${bar(m.pre_score||0)}</td>\n    <td style=\"padding:12px 8px;min-width:100px;\">${bar(m.quality_score||0)}</td>\n    <td style=\"padding:12px 8px;min-width:100px;\">${bar(m.token_efficiency||0)}</td>\n    <td style=\"padding:12px 8px;text-align:center;\">${tick(avail.success)} ${avail.latency ? `<span style=\"color:#64748b;font-size:11px\">${avail.latency}ms</span>` : ''}</td>\n    <td style=\"padding:12px 8px;text-align:center;\">${tick(sec.success)}</td>\n    <td style=\"padding:12px 8px;text-align:center;\">${tick(code.success)}</td>\n    <td style=\"padding:12px 8px;text-align:center;\">${tick(reas.success)}</td>\n    <td style=\"padding:12px 8px;text-align:center;\">${tick(docs.success)}</td>\n    <td style=\"padding:12px 8px;text-align:center;color:#64748b;font-size:12px;\">${m.success_rate||'-'}</td>\n    <td style=\"padding:12px 8px;text-align:center;color:#64748b;font-size:12px;\">${m.total_tokens||0}</td>\n  </tr>`;\n}).join('');\n\nconst totalOk = models.filter(m => (m.success_rate||'0/5').startsWith(4)||parseFloat((m.success_rate||'0').split('/')[0])>=4).length;\nconst avgFinal = models.length ? (models.reduce((a,m)=>a+(m.final_score||0),0)/models.length).toFixed(2) : 0;\nconst avgTokens = models.length ? Math.round(models.reduce((a,m)=>a+(m.total_tokens||0),0)/models.length) : 0;\nconst best = models[0];\n\nconst html = `<!DOCTYPE html>\n<html lang=\"ru\">\n<head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n<title>ü§ñ OpenRouter Model Report</title>\n<style>\n  *{box-sizing:border-box;margin:0;padding:0}\n  body{font-family:'Segoe UI',system-ui,sans-serif;background:#0f172a;color:#cbd5e1;min-height:100vh;padding:24px}\n  h1{font-size:28px;font-weight:800;color:#e2e8f0;margin-bottom:4px}\n  .sub{color:#64748b;font-size:14px;margin-bottom:24px}\n  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:28px}\n  .card{background:#1e293b;border-radius:12px;padding:20px;border:1px solid #334155}\n  .card-val{font-size:32px;font-weight:800;color:#818cf8;line-height:1}\n  .card-label{font-size:13px;color:#64748b;margin-top:6px}\n  .card-best{font-size:12px;color:#22c55e;margin-top:4px;word-break:break-all}\n  .section-title{font-size:16px;font-weight:700;color:#94a3b8;margin:28px 0 12px;letter-spacing:.5px;text-transform:uppercase}\n  .table-wrap{overflow-x:auto;border-radius:12px;border:1px solid #334155}\n  table{border-collapse:collapse;width:100%;background:#1e293b;font-size:13px}\n  th{background:#0f172a;color:#64748b;padding:10px 8px;text-align:left;font-weight:600;font-size:12px;text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid #334155;white-space:nowrap}\n  tr:hover{background:#273449}\n  .pill{display:inline-block;padding:3px 10px;border-radius:20px;font-size:12px;font-weight:600}\n  .pill-mode{background:#312e81;color:#818cf8}\n  .legend{display:flex;gap:16px;margin-bottom:16px;flex-wrap:wrap}\n  .leg-item{display:flex;align-items:center;gap:6px;font-size:12px;color:#64748b}\n  .leg-dot{width:12px;height:12px;border-radius:50%}\n  .footer{margin-top:32px;text-align:center;color:#334155;font-size:12px}\n  .top-model{background:linear-gradient(135deg,#1e293b,#1a1f3a);border:1px solid #4f46e5;border-radius:12px;padding:20px;margin-bottom:28px}\n  .top-model-title{font-size:12px;color:#818cf8;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}\n  .top-model-name{font-size:22px;font-weight:800;color:#e2e8f0;margin-bottom:12px;word-break:break-all}\n  .scores-inline{display:flex;gap:20px;flex-wrap:wrap}\n  .score-item{text-align:center}\n  .score-val{font-size:20px;font-weight:800}\n  .score-lbl{font-size:11px;color:#64748b;margin-top:2px}\n</style>\n</head>\n<body>\n<h1>ü§ñ OpenRouter Free Model Report</h1>\n<div class=\"sub\">üìÖ ${ts} &nbsp;|&nbsp; <span class=\"pill pill-mode\">${mode}</span> &nbsp;|&nbsp; –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –º–æ–¥–µ–ª–µ–π: <b>${models.length}</b></div>\n\n<div class=\"grid\">\n  <div class=\"card\"><div class=\"card-val\">${models.length}</div><div class=\"card-label\">–§–∏–Ω–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π</div></div>\n  <div class=\"card\"><div class=\"card-val\" style=\"color:#22c55e\">${avgFinal}</div><div class=\"card-label\">–°—Ä–µ–¥–Ω–∏–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫–æ—Ä</div></div>\n  <div class=\"card\"><div class=\"card-val\" style=\"color:#f59e0b\">${totalOk}</div><div class=\"card-label\">–ü—Ä–æ—à–ª–∏ ‚â•4 –∏–∑ 5 —Ç–µ—Å—Ç–æ–≤</div></div>\n  <div class=\"card\"><div class=\"card-val\" style=\"color:#94a3b8\">${avgTokens}</div><div class=\"card-label\">–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª-–≤–æ —Ç–æ–∫–µ–Ω–æ–≤</div></div>\n</div>\n\n${best ? `<div class=\"top-model\">\n  <div class=\"top-model-title\">üèÜ –õ—É—á—à–∞—è –º–æ–¥–µ–ª—å</div>\n  <div class=\"top-model-name\">${best.model_id}</div>\n  <div class=\"scores-inline\">\n    <div class=\"score-item\"><div class=\"score-val\" style=\"color:#818cf8\">${(best.final_score||0).toFixed(2)}</div><div class=\"score-lbl\">Final Score</div></div>\n    <div class=\"score-item\"><div class=\"score-val\" style=\"color:#22c55e\">${(best.pre_score||0).toFixed(2)}</div><div class=\"score-lbl\">Pre-Score</div></div>\n    <div class=\"score-item\"><div class=\"score-val\" style=\"color:#f59e0b\">${(best.quality_score||0).toFixed(2)}</div><div class=\"score-lbl\">Quality</div></div>\n    <div class=\"score-item\"><div class=\"score-val\" style=\"color:#38bdf8\">${(best.token_efficiency||0).toFixed(2)}</div><div class=\"score-lbl\">Token Eff</div></div>\n    <div class=\"score-item\"><div class=\"score-val\" style=\"color:#a3e635\">${best.success_rate||'-'}</div><div class=\"score-lbl\">Tests Passed</div></div>\n    <div class=\"score-item\"><div class=\"score-val\" style=\"color:#94a3b8\">${((best.context_length||0)/1000).toFixed(0)}k</div><div class=\"score-lbl\">Context</div></div>\n  </div>\n</div>` : ''}\n\n<div class=\"section-title\">üìä –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–æ–¥–µ–ª–µ–π</div>\n<div class=\"legend\">\n  <div class=\"leg-item\"><div class=\"leg-dot\" style=\"background:#22c55e\"></div> –û—Ç–ª–∏—á–Ω–æ (‚â•8.0)</div>\n  <div class=\"leg-item\"><div class=\"leg-dot\" style=\"background:#f59e0b\"></div> –•–æ—Ä–æ—à–æ (6-8)</div>\n  <div class=\"leg-item\"><div class=\"leg-dot\" style=\"background:#f97316\"></div> –°—Ä–µ–¥–Ω–µ (4-6)</div>\n  <div class=\"leg-item\"><div class=\"leg-dot\" style=\"background:#ef4444\"></div> –°–ª–∞–±–æ (&lt;4)</div>\n</div>\n<div class=\"table-wrap\">\n<table>\n  <thead><tr>\n    <th>#</th>\n    <th>–ú–æ–¥–µ–ª—å / –ù–∞–≤—ã–∫–∏</th>\n    <th>Context</th>\n    <th>üèÖ Final Score</th>\n    <th>üìä Pre-Score</th>\n    <th>üéØ Quality</th>\n    <th>‚ö° Token Eff</th>\n    <th>‚úÖ Test 1 Availability</th>\n    <th>üõ°Ô∏è T2 Sec</th>\n    <th>‚ú® T3 Code</th>\n    <th>üß† T4 Reason</th>\n    <th>üìö T5 Docs</th>\n    <th>Pass Rate</th>\n    <th>Tokens</th>\n  </tr></thead>\n  <tbody>${rows}</tbody>\n</table>\n</div>\n<div class=\"footer\">Generated by OpenRouter Advanced THREE PHASE Workflow &mdash; ${ts}</div>\n</body></html>`;\n\nreturn [{ json: { html_report: html, generated_at: ts, models_count: models.length, best_model: best?.model_id || 'N/A' } }];"
      },
      "typeVersion": 2
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "manual-check",
              "leftValue": "={{ $json.manual_models }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "mode-router",
      "name": "üîÄ Manual or Auto Mode?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        48,
        256
      ],
      "notes": "true ‚Üí —Ä—É—á–Ω–æ–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π, false ‚Üí –∞–≤—Ç–æ–ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º—É –∫–∞—Ç–∞–ª–æ–≥—É"
    },
    {
      "parameters": {
        "jsCode": "// üìã BUILD MANUAL MODEL LIST\n// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞–ª —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –≤—Ä—É—á–Ω—É—é –≤ ‚öôÔ∏è Configuration ‚Üí manual_models\n// –§–æ—Ä–º–∏—Ä—É–µ–º –æ–±—ä–µ–∫—Ç—ã —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å —Ñ–æ—Ä–º–∞—Ç–æ–º Phase 1\n\nconst config = $input.first().json;\nconst raw = config.manual_models || '';\nconst modelIds = raw.split(',').map(s => s.trim()).filter(Boolean);\n\nif (modelIds.length === 0) {\n  throw new Error('manual_models –ø—É—Å—Ç! –î–æ–±–∞–≤—å—Ç–µ ID –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.');\n}\n\nconsole.log('\\n' + '='.repeat(80));\nconsole.log('üìã MANUAL MODE: Testing specific models only');\nconsole.log('='.repeat(80));\nconsole.log(`\\nüéØ Models to test (${modelIds.length}):`);\nmodelIds.forEach((id, i) => console.log(`  ${i+1}. ${id}`));\nconsole.log('\\n' + '='.repeat(80) + '\\n');\n\n// –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ Phase 1 (–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ pre-scores)\nreturn modelIds.map(id => ({\n  json: {\n    model_id: id,\n    context_length: 0,\n    description: 'Manual selection',\n    pricing: {},\n    architecture: {},\n    modality: 'text->text',\n    scores: {\n      power: 5.0,\n      cost_efficiency: 5.0,\n      capability: 5.0,\n      compatibility: 5.0,\n      performance: 5.0,\n      composite: 5.0\n    },\n    skills: [],\n    avg_price: 0,\n    is_multimodal: false,\n    source: 'manual_selection',\n    manual_mode: true,\n    openrouter_api_key: config.openrouter_api_key\n  }\n}));"
      },
      "id": "manual-list-node",
      "name": "üìã Build Manual Model List",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        240,
        400
      ]
    },
    {
      "parameters": {
        "jsCode": "const html = $json.html_report;\nif (!html) {\n  return [{ json: { status: 'error', message: 'No HTML content found' } }];\n}\n\n// Save to Desktop\nconst fs = require('fs');\nconst os = require('os');\nconst path = require('path');\n\nconst desktop = path.join(os.homedir(), 'Desktop');\nconst filename = path.join(desktop, 'openrouter_report.html');\n\nfs.writeFileSync(filename, html, 'utf-8');\n\nreturn [{\n  json: {\n    status: 'saved',\n    file_path: filename,\n    message: 'HTML-–æ—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –Ω–∞ –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª: openrouter_report.html',\n    models_count: $json.models_count,\n    best_model: $json.best_model,\n    generated_at: $json.generated_at\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2880,
        680
      ],
      "id": "save-html-node",
      "name": "üíæ Save HTML to Desktop"
    }
  ],
  "connections": {
    "‚ñ∂Ô∏è Start Workflow": {
      "main": [
        [
          {
            "node": "‚öôÔ∏è Configuration",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚öôÔ∏è Configuration": {
      "main": [
        [
          {
            "node": "üé≠ Apply Task Preset",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üé≠ Apply Task Preset": {
      "main": [
        [
          {
            "node": "üîÄ Manual or Auto Mode?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì° Fetch Full OpenRouter Catalog": {
      "main": [
        [
          {
            "node": "üß† PHASE 0: Pre-Scoring & Selection",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üß† PHASE 0: Pre-Scoring & Selection": {
      "main": [
        [
          {
            "node": "üì¶ PHASE 1: Split (Quick Test)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì¶ PHASE 1: Split (Quick Test)": {
      "main": [
        [
          {
            "node": "üì• Collect Phase 1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "üöÄ Init Phase 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üöÄ Init Phase 1": {
      "main": [
        [
          {
            "node": "üß™ Test 1: Availability",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üß™ Test 1: Availability": {
      "main": [
        [
          {
            "node": "üíæ Save Test 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üíæ Save Test 1": {
      "main": [
        [
          {
            "node": "üì• Collect Phase 1",
            "type": "main",
            "index": 1
          },
          {
            "node": "üì¶ PHASE 1: Split (Quick Test)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì• Collect Phase 1": {
      "main": [
        [
          {
            "node": "üéØ Analyze Phase 1 & Select for Phase 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üéØ Analyze Phase 1 & Select for Phase 2": {
      "main": [
        [
          {
            "node": "üì¶ PHASE 2: Split (Detailed Tests)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì¶ PHASE 2: Split (Detailed Tests)": {
      "main": [
        [
          {
            "node": "üì• Collect Phase 2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "üöÄ Init Phase 2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üöÄ Init Phase 2": {
      "main": [
        [
          {
            "node": "üõ°Ô∏è Test 2: Security",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üõ°Ô∏è Test 2: Security": {
      "main": [
        [
          {
            "node": "üíæ Save T2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üíæ Save T2": {
      "main": [
        [
          {
            "node": "‚ú® Test 3: Code Quality",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "‚ú® Test 3: Code Quality": {
      "main": [
        [
          {
            "node": "üíæ Save T3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üíæ Save T3": {
      "main": [
        [
          {
            "node": "üß† Test 4: Reasoning",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üß† Test 4: Reasoning": {
      "main": [
        [
          {
            "node": "üíæ Save T4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üíæ Save T4": {
      "main": [
        [
          {
            "node": "üìö Test 5: Documentation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìö Test 5: Documentation": {
      "main": [
        [
          {
            "node": "üíæ Save T5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üíæ Save T5": {
      "main": [
        [
          {
            "node": "üì• Collect Phase 2",
            "type": "main",
            "index": 1
          },
          {
            "node": "üì¶ PHASE 2: Split (Detailed Tests)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì• Collect Phase 2": {
      "main": [
        [
          {
            "node": "üìä Final Ranking & Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìä Final Ranking & Analysis": {
      "main": [
        [
          {
            "node": "üìà HTML Report Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìà HTML Report Generator": {
      "main": [
        [
          {
            "node": "üìÑ Export Results",
            "type": "main",
            "index": 0
          },
          {
            "node": "üíæ Save HTML to Desktop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "—Ä—ü‚Äú‚Ç¨ HTML Report Generator": {
      "main": [
        [
          {
            "node": "—Ä—ü‚Äú‚Äû Export Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîÄ Manual or Auto Mode?": {
      "main": [
        [
          {
            "node": "üìã Build Manual Model List",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "üì° Fetch Full OpenRouter Catalog",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìã Build Manual Model List": {
      "main": [
        [
          {
            "node": "üì¶ PHASE 1: Split (Quick Test)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "id": "advanced-three-phase",
  "tags": []
}